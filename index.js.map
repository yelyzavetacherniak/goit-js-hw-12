{"version":3,"file":"index.js","sources":["../src/img/warning.svg","../src/img/close.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.81%200.219C6.95056%200.0787966%207.14097%204.21785e-05%207.3395%200L16.6605%200C16.859%204.21785e-05%2017.0494%200.0787966%2017.19%200.219L23.781%206.81C23.9212%206.95056%2024%207.14097%2024%207.3395V16.6605C24%2016.859%2023.9212%2017.0494%2023.781%2017.19L17.19%2023.781C17.0494%2023.9212%2016.859%2024%2016.6605%2024H7.3395C7.14097%2024%206.95056%2023.9212%206.81%2023.781L0.219%2017.19C0.0787966%2017.0494%204.21785e-05%2016.859%200%2016.6605L0%207.3395C4.21785e-05%207.14097%200.0787966%206.95056%200.219%206.81L6.81%200.219ZM7.65%201.5L1.5%207.65V16.35L7.65%2022.5H16.35L22.5%2016.35V7.65L16.35%201.5H7.65Z'%20fill='%23FAFAFB'/%3e%3cpath%20d='M6.96912%206.969C7.03879%206.89916%207.12155%206.84374%207.21267%206.80593C7.30379%206.76812%207.40147%206.74866%207.50012%206.74866C7.59877%206.74866%207.69645%206.76812%207.78757%206.80593C7.87869%206.84374%207.96145%206.89916%208.03112%206.969L12.0001%2010.9395L15.9691%206.969C16.0389%206.89927%2016.1216%206.84395%2016.2127%206.80622C16.3039%206.76848%2016.4015%206.74905%2016.5001%206.74905C16.5987%206.74905%2016.6964%206.76848%2016.7875%206.80622C16.8786%206.84395%2016.9614%206.89927%2017.0311%206.969C17.1009%207.03873%2017.1562%207.12152%2017.1939%207.21263C17.2316%207.30374%2017.2511%207.40139%2017.2511%207.5C17.2511%207.59862%2017.2316%207.69627%2017.1939%207.78738C17.1562%207.87849%2017.1009%207.96127%2017.0311%208.031L13.0606%2012L17.0311%2015.969C17.1009%2016.0387%2017.1562%2016.1215%2017.1939%2016.2126C17.2316%2016.3037%2017.2511%2016.4014%2017.2511%2016.5C17.2511%2016.5986%2017.2316%2016.6963%2017.1939%2016.7874C17.1562%2016.8785%2017.1009%2016.9613%2017.0311%2017.031C16.9614%2017.1007%2016.8786%2017.156%2016.7875%2017.1938C16.6964%2017.2315%2016.5987%2017.2509%2016.5001%2017.2509C16.4015%2017.2509%2016.3039%2017.2315%2016.2127%2017.1938C16.1216%2017.156%2016.0389%2017.1007%2015.9691%2017.031L12.0001%2013.0605L8.03112%2017.031C7.96139%2017.1007%207.8786%2017.156%207.7875%2017.1938C7.69639%2017.2315%207.59874%2017.2509%207.50012%2017.2509C7.4015%2017.2509%207.30385%2017.2315%207.21274%2017.1938C7.12164%2017.156%207.03885%2017.1007%206.96912%2017.031C6.89939%2016.9613%206.84407%2016.8785%206.80633%2016.7874C6.7686%2016.6963%206.74917%2016.5986%206.74917%2016.5C6.74917%2016.4014%206.7686%2016.3037%206.80633%2016.2126C6.84407%2016.1215%206.89939%2016.0387%206.96912%2015.969L10.9396%2012L6.96912%208.031C6.89927%207.96133%206.84386%207.87857%206.80605%207.78745C6.76824%207.69633%206.74878%207.59865%206.74878%207.5C6.74878%207.40135%206.76824%207.30367%206.80605%207.21255C6.84386%207.12143%206.89927%207.03867%206.96912%206.969Z'%20fill='%23FAFAFB'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='white'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.145899%200.853998C0.0994111%200.80751%200.062535%200.752321%200.0373759%200.691582C0.0122168%200.630842%20-0.000732421%200.565742%20-0.000732422%200.499998C-0.000732422%200.434254%200.0122168%200.369154%200.0373759%200.308415C0.062535%200.247676%200.0994111%200.192486%200.145899%200.145998C0.192387%200.0995103%200.247576%200.0626342%200.308316%200.0374751C0.369055%200.012316%200.434155%20-0.00063324%200.499899%20-0.00063324C0.565643%20-0.000633239%200.630743%200.012316%200.691483%200.0374751C0.752222%200.0626342%200.807411%200.0995103%200.853899%200.145998L5.9999%205.293L11.1459%200.145998C11.1924%200.0995103%2011.2476%200.0626342%2011.3083%200.0374751C11.3691%200.012316%2011.4342%20-0.00063324%2011.4999%20-0.00063324C11.5656%20-0.00063324%2011.6307%200.012316%2011.6915%200.0374751C11.7522%200.0626342%2011.8074%200.0995103%2011.8539%200.145998C11.9004%200.192486%2011.9373%200.247676%2011.9624%200.308415C11.9876%200.369154%2012.0005%200.434254%2012.0005%200.499998C12.0005%200.565742%2011.9876%200.630842%2011.9624%200.691582C11.9373%200.752321%2011.9004%200.80751%2011.8539%200.853998L6.7069%206L11.8539%2011.146C11.9004%2011.1925%2011.9373%2011.2477%2011.9624%2011.3084C11.9876%2011.3692%2012.0005%2011.4343%2012.0005%2011.5C12.0005%2011.5657%2011.9876%2011.6308%2011.9624%2011.6916C11.9373%2011.7523%2011.9004%2011.8075%2011.8539%2011.854C11.8074%2011.9005%2011.7522%2011.9374%2011.6915%2011.9625C11.6307%2011.9877%2011.5656%2012.0006%2011.4999%2012.0006C11.4342%2012.0006%2011.3691%2011.9877%2011.3083%2011.9625C11.2476%2011.9374%2011.1924%2011.9005%2011.1459%2011.854L5.9999%206.707L0.853899%2011.854C0.807411%2011.9005%200.752222%2011.9374%200.691483%2011.9625C0.630743%2011.9877%200.565643%2012.0006%200.499899%2012.0006C0.434155%2012.0006%200.369055%2011.9877%200.308316%2011.9625C0.247576%2011.9374%200.192387%2011.9005%200.145899%2011.854C0.0994111%2011.8075%200.062535%2011.7523%200.0373759%2011.6916C0.0122168%2011.6308%20-0.000732422%2011.5657%20-0.000732422%2011.5C-0.000732422%2011.4343%200.0122168%2011.3692%200.0373759%2011.3084C0.062535%2011.2477%200.0994111%2011.1925%200.145899%2011.146L5.2929%206L0.145899%200.853998Z'%20fill='white'/%3e%3c/svg%3e\"","import axios from 'axios';\n\nconst baseUrl = 'https://pixabay.com/api/';\nconst myApiKey = '51482137-814db58508ed4552264af265d';\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios(baseUrl, {\n      params: {\n        key: myApiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadmore = document.querySelector('.btn-loadmore');\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery-image\"/>\n        </a>\n        <div class=\"info\">\n  <div class=\"label\">Likes</div>\n  <div class=\"label\">Views</div>\n  <div class=\"label\">Comments</div>\n  <div class=\"label\">Downloads</div>\n\n  <div class=\"value\">${likes}</div>\n  <div class=\"value\">${views}</div>\n  <div class=\"value\">${comments}</div>\n  <div class=\"value\">${downloads}</div>\n        </div>\n      </li>\n`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  btnLoadmore.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  btnLoadmore.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport warningIcon from './img/warning.svg';\nimport closeIcon from './img/close.svg';\n\nimport { getImagesByQuery } from './js/pixabay-api';\n\nimport {\n  clearGallery,\n  createGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nhideLoader();\nhideLoadMoreButton();\n\nconst formSearch = document.querySelector('.form');\nconst input = formSearch.querySelector('input[name=\"search-text\"]');\nconst btnLoadMore = document.querySelector('.btn-loadmore');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nformSearch.addEventListener('submit', handleSubmit);\nbtnLoadMore.addEventListener('click', handleLoading);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  const query = input.value.trim();\n  if (!query) return;\n\n  currentQuery = query;\n  currentPage = 1;\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      hideLoader();\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    createGallery(data.hits);\n    console.log(data);\n\n    const maxPages = Math.ceil(data.totalHits / data.hits.length);\n    if (currentPage >= maxPages) {\n      showInfo(\"We're sorry, but you've reached the end of search results.\");\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    showError('Something went wrong. Please try again later.');\n    hideLoadMoreButton();\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function handleLoading() {\n  currentPage++;\n\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    createGallery(data.hits);\n    scrollPage();\n\n    const maxPages = Math.ceil(data.totalHits / data.hits.length);\n    if (currentPage >= maxPages) {\n      showInfo(\"We're sorry, but you've reached the end of search results.\");\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    showError('Something went wrong. Please try again later.');\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction scrollPage() {\n  if (currentPage === 1) return;\n\n  const card = document.querySelector('.gallery li');\n  if (!card) return;\n\n  const { height: cardHeight } = card.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction showInfo(message) {\n  iziToast.info({\n    message,\n    position: 'topRight',\n    timeout: 2000,\n    progressBarColor: '#4e75ff',\n    messageColor: '#ffffff',\n    backgroundColor: '#4e75ff',\n    close: true,\n    iconUrl: warningIcon,\n    onOpening: (instance, toast) => {\n      const closeBtn = toast.querySelector('.iziToast-close');\n      if (closeBtn) {\n        closeBtn.style.backgroundImage = `url(${closeIcon})`;\n        closeBtn.style.backgroundSize = '12px 12px';\n        closeBtn.style.backgroundRepeat = 'no-repeat';\n        closeBtn.style.backgroundPosition = 'center';\n        closeBtn.style.color = '#ffffff';\n      }\n    },\n  });\n}\n\nfunction showError(message) {\n  iziToast.error({\n    message,\n    position: 'topRight',\n    iconUrl: warningIcon,\n    progressBarColor: '#ffffff',\n    messageColor: '#ffffff',\n    titleColor: '#ffffff',\n    backgroundColor: '#ef4040',\n    timeout: 2000,\n    close: true,\n    onOpening: (instance, toast) => {\n      const closeBtn = toast.querySelector('.iziToast-close');\n      if (closeBtn) {\n        closeBtn.style.backgroundImage = `url(${closeIcon})`;\n        closeBtn.style.backgroundSize = '12px 12px';\n        closeBtn.style.backgroundRepeat = 'no-repeat';\n        closeBtn.style.backgroundPosition = 'center';\n        closeBtn.style.color = '#ffffff';\n      }\n    },\n  });\n}\n"],"names":["warningIcon","closeIcon","baseUrl","myApiKey","getImagesByQuery","query","page","axios","error","gallery","loader","btnLoadmore","lightbox","SimpleLightbox","clearGallery","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formSearch","input","btnLoadMore","currentPage","currentQuery","handleSubmit","handleLoading","event","data","showError","maxPages","showInfo","scrollPage","card","cardHeight","message","iziToast","instance","toast","closeBtn"],"mappings":"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"}